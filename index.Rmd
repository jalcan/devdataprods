---
title       : Cardiovascular Disease Risk Assessment
subtitle    : Presentation of a Shiny App
author      : 
job         : 
framework   : html5slides        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : []            # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
---

Cardiovascular Disease Risk Assessment
======================================

<br/><br/><br/><br/>

Presentation pitch for a Shiny App:

Risk Assessment  for Estimating Your 10-year Risk of Having a Heart Attack


---


Cardiovascular Disease Risk Assessment
======================================

<font size=5>
<p>Cardiovascular disease is becoming a massive modern epidemic.</p>
<p>Proper assesment is key to prevention and control.</p>

<p>Here, I present an online tool to allow easy personal assesment of cardiovascular disease based on the <a href="http://en.wikipedia.org/wiki/Framingham_Heart_Study">Framingham Heart Study</a>
</p>   
</font>

---

Cardiovascular Disease Risk Assessment
======================================
<font size=5>

The Framingham Heart Study is a long-term, ongoing cardiovascular study on residents of the town of Framingham, Massachusetts.  

<br/>
The study began in 1948 with 5,209 adult, and is now on its third generation of participants. Prior to it almost nothing was known about the "epidemiology of hypertensive or arteriosclerotic cardiovascular disease".

<br/>
By discovering the main risk factors associated with cardiovascular disease, this study changed forever the way we understand the disease, and  allows us to assess and <b>prevent</b> those factos.


<br/>

<div align="right">
Source: Wikipedia, <a href="http://en.wikipedia.org/wiki/Framingham_Heart_Study">Framingham_Heart_Study</a>
</div>
</font>


---

Cardiovascular Disease Risk Assessment
======================================

```{r echo=FALSE,cache=TRUE}
cvd <- function(gender,age,chol,hdl,sbp,hypert,smoker){
        
        men = data.frame(coef=c(52.00961,20.014077,-0.905964,1.305784, 0.241549, 12.096316, -4.605038, -2.84367,-2.93323)
                         ,xbar=c(3.8926095,5.3441475,3.7731132, 4.8618212,  0.1180474, 0.335602,20.8111562,1.2890301,15.2144965 )
        )
        
        
        women = data.frame(coef=c(31.764001, 22.465206, -1.187731,2.552905,0.420251,13.07543,-5.060998,-2.996945,0)
                           ,xbar=c(3.9213204,5.3628984,4.0146369,4.8376494,0.142802,0.3236202,21.0557746,1.2519882,0)
        )
        
        person = if (gender=="m") men else women;
        
        
        person$betaxbar = person$coef*person$xbar
        
        personbetaxbar = sum(person$betaxbar)
        
        
        person$x = c(log(age),log(chol),log(hdl),log(sbp),0,0,0,0,0)
        person$x[5] =  if (hypert==TRUE) 1 else if (hypert==FALSE) 0 
        person$x[6] =  if (smoker==TRUE) 1 else if (smoker==FALSE) 0 
        person$x[7] = person$x[1]*person$x[2]
        person$x[8] = person$x[1]*person$x[6]
        person$x[9] = person$x[1]*person$x[1]
        
        person$betax = person$x*person$coef
        
        # age compensation for men
        if(age > 70 & gender=="m"){
                person$betax[8] =  person$coef[8]*log(70)*person$x[6]
        }else{
                person$betax[8] = person$coef[8]*person$x[8]
                
        }
        #age compensation for women
        if(age > 78 & gender=="f"){
                person$betax[8] =  person$coef[8]*log(78)*person$x[6]
        }else{
                person$betax[8] = person$coef[8]*person$x[8]
                
        }
                
        personbetax = sum(person$betax)
        sdt = c(m=0.9402, f=0.98767)
        pred = 1 - sdt[gender]^exp(personbetax-personbetaxbar)
        names(pred)<-NULL
        paste(round(100*pred), "%", sep="")
}
```
<font size="4">
Example calculation for a male, 55 years old, with a total Cholesterol of 220, HDL (High Density Lipoprotein) 50,  Systolic Blood Pressure in 160, in treatment for Hypertension and current smoker


```{r cache=TRUE}
gender="m"
age=55
chol=220
hdl=50
sbp=160
hypert=TRUE
smoker=TRUE
risk = cvd(gender, age,chol,hdl,sbp,hypert,smoker)
```
Your current 10-year Risk of Having a Heart Attack is:
```{r echo=FALSE, cache=TRUE}
risk
```

<div align="center">
<a href="https://jalcan.shinyapps.io/cvd_app2/" >My shiny app</a>
</div>
Re-Check here: <a href="http://cvdrisk.nhlbi.nih.gov" >National Health Institutes (based on the same data)</a>
</font>  

---

References and sources 
======================
<br/><br/>
<font size="4", align="left">
<ol>
<b>Risk Assessment Tool for Estimating Your 10-year Risk of Having a Heart Attack. National Healt Institutes:</b>
http://cvdrisk.nhlbi.nih.gov/calculator.asp
</ol><ol>
<b>The Framingham Heart Studio (wikipedia):</b>
http://en.wikipedia.org/wiki/Framingham_Heart_Study
</ol><ol>
<b>The Framingham Risk Score (wikipedia):</b>
http://en.wikipedia.org/wiki/Framingham_Risk_Score#Current_version_of_the_Framingham_Risk_Score
  </ol>
</font>
